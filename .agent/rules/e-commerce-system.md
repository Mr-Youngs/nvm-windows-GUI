---
trigger: always_on
---

## Workspace 语言约束声明
- 本 Workspace 必须遵守 Global Rules 中的中文强制规范
- 所有输出必须使用简体中文

## 生产环境要求
- 所有方案默认用于生产环境
- 不接受 Demo、示例级、教学简化实现
- 代码必须考虑长期维护、扩展与重构成本

## Agent 行为约束
- 在给出代码前，应优先给出架构或模块设计
- 当发现现有设计存在明显问题时，必须指出
- 不允许为了完成需求而忽略工程风险

## 电商系统工程规范（强业务导向）

### 一、项目识别
当前项目为电商系统，需优先考虑：
- 订单生命周期复杂性
- 支付与库存一致性
- 高并发与活动峰值

### 二、系统拆分原则
必须明确区分以下子系统：
1. 用户侧（商城前台）
2. 商家后台
3. 运营后台
4. 订单 / 支付 / 库存子系统

禁止：
- 一个前端项目承载所有角色
- 业务逻辑混杂在 UI 层

### 三、前端架构
- 商城前台：
  - Next.js / Nuxt
  - SSR / SSG
  - 性能与 SEO 优先
- 后台系统：
  - React / Vue 3
  - SPA
  - 权限与状态管理优先

### 四、业务建模要求
1. 必须显式建模：
   - 订单状态机
   - 支付状态
   - 库存锁定 / 回滚
2. 不允许使用布尔值拼业务逻辑

### 五、性能与稳定性
1. 列表、商品页必须考虑：
   - 分页
   - 懒加载
   - 缓存
2. 高并发场景需主动指出瓶颈

### 六、反模式（必须避免）
- 在组件中直接处理订单业务
- 把活动规则写死在前端
